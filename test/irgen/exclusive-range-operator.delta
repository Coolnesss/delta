// RUN: %delta -print-ir %s | %FileCheck %s
// RUN: check_exit_status 6 %delta run %s

// CHECK-LABEL: define i32 @main()
func main() -> int {
    var p = 9;

    // CHECK: alloca %"RangeIterator<int>"
    // CHECK-NEXT: %i = alloca i32
    // CHECK: [[RANGE:%[a-z0-9]+]] = call %"Range<int>" @"Range<int>.init"(i32 0, i32 3)
    // CHECK-NEXT: call %"RangeIterator<int>" @"Range<int>.iterator"(%"Range<int>" [[RANGE]])
    // CHECK: call i1 @"RangeIterator<int>.hasNext"
    // CHECK: call i32 @"RangeIterator<int>.next"
    for (let i in 0..3) {
        p -= i;
    }

    return p;
}
