// RUN: %delta -print-ir %s | %FileCheck %s
// RUN: %delta -print-ir %s | %FileCheck %s -check-prefix=CHECK-MAIN

func main() {
    // CHECK-MAIN: call void @Foo.init(%Foo* %f, i32 5)
    var f = Foo(5);
    // CHECK-MAIN: call void @Foo.deinit(%Foo %{{[0-9]+}})
}

// CHECK-DAG: %Foo = type { float }
struct Foo {
    let f: float;
    // CHECK-DAG: define void @Foo.init(%Foo* %this, i32 %i)
    init(i: int) { }
    // CHECK-DAG: define void @Foo.deinit(%Foo %this)
    deinit() { }
}
